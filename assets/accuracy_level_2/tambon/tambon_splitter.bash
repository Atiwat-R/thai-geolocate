

# Used for breaking up tambon geojson into separate files by amphoe, allowing for faster search

# Define the input and output directories
input_file="./tambon_full.json"
output_dir="./"

# Ensure the output directory exists
mkdir -p "$output_dir"

# Define the list of amphoe codes as provided
amphoe_code=(
"TH1001" "TH1002" "TH1003" "TH1004" "TH1005" "TH1006" "TH1007" "TH1008" "TH1009" "TH1010" "TH1011" "TH1012" "TH1013" "TH1014" "TH1015" "TH1016" "TH1017" "TH1018" "TH1019" "TH1020" "TH1021" "TH1022" "TH1023" "TH1024" "TH1025" "TH1026" "TH1027" "TH1028" "TH1029" "TH1030" "TH1031" "TH1032" "TH1033" "TH1034" "TH1035" "TH1036" "TH1037" "TH1038" "TH1039" "TH1040" "TH1041" "TH1042" "TH1043" "TH1044" "TH1045" "TH1046" "TH1047" "TH1048" "TH1049" "TH1050" "TH1101" "TH1102" "TH1103" "TH1104" "TH1105" "TH1106" "TH1201" "TH1202" "TH1203" "TH1204" "TH1205" "TH1206" "TH1301" "TH1302" "TH1303" "TH1304" "TH1305" "TH1306" "TH1307" "TH1401" "TH1402" "TH1403" "TH1404" "TH1405" "TH1406" "TH1407" "TH1408" "TH1409" "TH1410" "TH1411" "TH1412" "TH1413" "TH1414" "TH1415" "TH1416" "TH1501" "TH1502" "TH1503" "TH1504" "TH1505" "TH1506" "TH1507" "TH1601" "TH1602" "TH1603" "TH1604" "TH1605" "TH1606" "TH1607" "TH1608" "TH1609" "TH1610" "TH1611" "TH1701" "TH1702" "TH1703" "TH1704" "TH1705" "TH1706" "TH1801" "TH1802" "TH1803" "TH1804" "TH1805" "TH1806" "TH1807" "TH1808" "TH1901" "TH1902" "TH1903" "TH1904" "TH1905" "TH1906" "TH1907" "TH1908" "TH1909" "TH1910" "TH1911" "TH1912" "TH1913" "TH2001" "TH2002" "TH2003" "TH2004" "TH2005" "TH2006" "TH2007" "TH2008" "TH2009" "TH2010" "TH2011" "TH2101" "TH2102" "TH2103" "TH2104" "TH2105" "TH2106" "TH2107" "TH2108" "TH2201" "TH2202" "TH2203" "TH2204" "TH2205" "TH2206" "TH2207" "TH2208" "TH2209" "TH2210" "TH2301" "TH2302" "TH2303" "TH2304" "TH2305" "TH2306" "TH2307" "TH2401" "TH2402" "TH2403" "TH2404" "TH2405" "TH2406" "TH2407" "TH2408" "TH2409" "TH2410" "TH2411" "TH2501" "TH2502" "TH2503" "TH2506" "TH2507" "TH2508" "TH2509" "TH2601" "TH2602" "TH2603" "TH2604" "TH2701" "TH2702" "TH2703" "TH2704" "TH2705" "TH2706" "TH2707" "TH2708" "TH2709" "TH3001" "TH3002" "TH3003" "TH3004" "TH3005" "TH3006" "TH3007" "TH3008" "TH3009" "TH3010" "TH3011" "TH3012" "TH3013" "TH3014" "TH3015" "TH3016" "TH3017" "TH3018" "TH3019" "TH3020" "TH3021" "TH3022" "TH3023" "TH3024" "TH3025" "TH3026" "TH3027" "TH3028" "TH3029" "TH3030" "TH3031" "TH3032" "TH3101" "TH3102" "TH3103" "TH3104" "TH3105" "TH3106" "TH3107" "TH3108" "TH3109" "TH3110" "TH3111" "TH3112" "TH3113" "TH3114" "TH3115" "TH3116" "TH3117" "TH3118" "TH3119" "TH3120" "TH3121" "TH3122" "TH3123" "TH3201" "TH3202" "TH3203" "TH3204" "TH3205" "TH3206" "TH3207" "TH3208" "TH3209" "TH3210" "TH3211" "TH3212" "TH3213" "TH3214" "TH3215" "TH3216" "TH3217" "TH3301" "TH3302" "TH3303" "TH3304" "TH3305" "TH3306" "TH3307" "TH3308" "TH3309" "TH3310" "TH3311" "TH3312" "TH3313" "TH3314" "TH3315" "TH3316" "TH3317" "TH3318" "TH3319" "TH3320" "TH3321" "TH3322" "TH3401" "TH3402" "TH3403" "TH3404" "TH3405" "TH3407" "TH3408" "TH3409" "TH3410" "TH3411" "TH3412" "TH3414" "TH3415" "TH3419" "TH3420" "TH3421" "TH3422" "TH3424" "TH3425" "TH3426" "TH3429" "TH3430" "TH3431" "TH3432" "TH3433" "TH3501" "TH3502" "TH3503" "TH3504" "TH3505" "TH3506" "TH3507" "TH3508" "TH3509" "TH3601" "TH3602" "TH3603" "TH3604" "TH3605" "TH3606" "TH3607" "TH3608" "TH3609" "TH3610" "TH3611" "TH3612" "TH3613" "TH3614" "TH3615" "TH3616" "TH3701" "TH3702" "TH3703" "TH3704" "TH3705" "TH3706" "TH3707" "TH3801" "TH3802" "TH3803" "TH3804" "TH3805" "TH3806" "TH3807" "TH3808" "TH3901" "TH3902" "TH3903" "TH3904" "TH3905" "TH3906" "TH4001" "TH4002" "TH4003" "TH4004" "TH4005" "TH4006" "TH4007" "TH4008" "TH4009" "TH4010" "TH4011" "TH4012" "TH4013" "TH4014" "TH4015" "TH4016" "TH4017" "TH4018" "TH4019" "TH4020" "TH4021" "TH4022" "TH4023" "TH4024" "TH4025" "TH4029" "TH4101" "TH4102" "TH4103" "TH4104" "TH4105" "TH4106" "TH4107" "TH4108" "TH4109" "TH4110" "TH4111" "TH4117" "TH4118" "TH4119" "TH4120" "TH4121" "TH4122" "TH4123" "TH4124" "TH4125" "TH4201" "TH4202" "TH4203" "TH4204" "TH4205" "TH4206" "TH4207" "TH4208" "TH4209" "TH4210" "TH4211" "TH4212" "TH4213" "TH4214" "TH4301" "TH4302" "TH4305" "TH4307" "TH4308" "TH4314" "TH4315" "TH4316" "TH4317" "TH4401" "TH4402" "TH4403" "TH4404" "TH4405" "TH4406" "TH4407" "TH4408" "TH4409" "TH4410" "TH4411" "TH4412" "TH4413" "TH4501" "TH4502" "TH4503" "TH4504" "TH4505" "TH4506" "TH4507" "TH4508" "TH4509" "TH4510" "TH4511" "TH4512" "TH4513" "TH4514" "TH4515" "TH4516" "TH4517" "TH4518" "TH4519" "TH4520" "TH4601" "TH4602" "TH4603" "TH4604" "TH4605" "TH4606" "TH4607" "TH4608" "TH4609" "TH4610" "TH4611" "TH4612" "TH4613" "TH4614" "TH4615" "TH4616" "TH4617" "TH4618" "TH4701" "TH4702" "TH4703" "TH4704" "TH4705" "TH4706" "TH4707" "TH4708" "TH4709" "TH4710" "TH4711" "TH4712" "TH4713" "TH4714" "TH4715" "TH4716" "TH4717" "TH4718" "TH4801" "TH4802" "TH4803" "TH4804" "TH4805" "TH4806" "TH4807" "TH4808" "TH4809" "TH4810" "TH4811" "TH4812" "TH4901" "TH4902" "TH4903" "TH4904" "TH4905" "TH4906" "TH4907" "TH5001" "TH5002" "TH5003" "TH5004" "TH5005" "TH5006" "TH5007" "TH5008" "TH5009" "TH5010" "TH5011" "TH5012" "TH5013" "TH5014" "TH5015" "TH5016" "TH5017" "TH5018" "TH5019" "TH5020" "TH5021" "TH5022" "TH5023" "TH5024" "TH5025" "TH5101" "TH5102" "TH5103" "TH5104" "TH5105" "TH5106" "TH5107" "TH5108" "TH5201" "TH5202" "TH5203" "TH5204" "TH5205" "TH5206" "TH5207" "TH5208" "TH5209" "TH5210" "TH5211" "TH5212" "TH5213" "TH5301" "TH5302" "TH5303" "TH5304" "TH5305" "TH5306" "TH5307" "TH5308" "TH5309" "TH5401" "TH5402" "TH5403" "TH5404" "TH5405" "TH5406" "TH5407" "TH5408" "TH5501" "TH5502" "TH5503" "TH5504" "TH5505" "TH5506" "TH5507" "TH5508" "TH5509" "TH5510" "TH5511" "TH5512" "TH5513" "TH5514" "TH5515" "TH5601" "TH5602" "TH5603" "TH5604" "TH5605" "TH5606" "TH5607" "TH5608" "TH5609" "TH5701" "TH5702" "TH5703" "TH5704" "TH5705" "TH5706" "TH5707" "TH5708" "TH5709" "TH5710" "TH5711" "TH5712" "TH5713" "TH5714" "TH5715" "TH5716" "TH5717" "TH5718" "TH5801" "TH5802" "TH5803" "TH5804" "TH5805" "TH5806" "TH5807" "TH6001" "TH6002" "TH6003" "TH6004" "TH6005" "TH6006" "TH6007" "TH6008" "TH6009" "TH6010" "TH6011" "TH6012" "TH6013" "TH6014" "TH6015" "TH6101" "TH6102" "TH6103" "TH6104" "TH6105" "TH6106" "TH6107" "TH6108" "TH6201" "TH6202" "TH6203" "TH6204" "TH6205" "TH6206" "TH6207" "TH6208" "TH6209" "TH6210" "TH6211" "TH6301" "TH6302" "TH6303" "TH6304" "TH6305" "TH6306" "TH6307" "TH6308" "TH6309" "TH6401" "TH6402" "TH6403" "TH6404" "TH6405" "TH6406" "TH6407" "TH6408" "TH6409" "TH6501" "TH6502" "TH6503" "TH6504" "TH6505" "TH6506" "TH6507" "TH6508" "TH6509" "TH6601" "TH6602" "TH6603" "TH6604" "TH6605" "TH6606" "TH6607" "TH6608" "TH6609" "TH6610" "TH6611" "TH6612" "TH6701" "TH6702" "TH6703" "TH6704" "TH6705" "TH6706" "TH6707" "TH6708" "TH6709" "TH6710" "TH6711" "TH7001" "TH7002" "TH7003" "TH7004" "TH7005" "TH7006" "TH7007" "TH7008" "TH7009" "TH7010" "TH7101" "TH7102" "TH7103" "TH7104" "TH7105" "TH7106" "TH7107" "TH7108" "TH7109" "TH7110" "TH7111" "TH7112" "TH7113" "TH7201" "TH7202" "TH7203" "TH7204" "TH7205" "TH7206" "TH7207" "TH7208" "TH7209" "TH7210" "TH7301" "TH7302" "TH7303" "TH7304" "TH7305" "TH7306" "TH7307" "TH7401" "TH7402" "TH7403" "TH7501" "TH7502" "TH7503" "TH7601" "TH7602" "TH7603" "TH7604" "TH7605" "TH7606" "TH7607" "TH7608" "TH7701" "TH7702" "TH7703" "TH7704" "TH7705" "TH7706" "TH7707" "TH7708" "TH8001" "TH8002" "TH8003" "TH8004" "TH8005" "TH8006" "TH8007" "TH8008" "TH8009" "TH8010" "TH8011" "TH8012" "TH8013" "TH8014" "TH8015" "TH8016" "TH8017" "TH8018" "TH8019" "TH8020" "TH8021" "TH8022" "TH8023" "TH8101" "TH8102" "TH8103" "TH8104" "TH8105" "TH8106" "TH8107" "TH8108" "TH8201" "TH8202" "TH8203" "TH8204" "TH8205" "TH8206" "TH8207" "TH8208" "TH8301" "TH8302" "TH8303" "TH8401" "TH8402" "TH8403" "TH8404" "TH8405" "TH8406" "TH8407" "TH8408" "TH8409" "TH8410" "TH8411" "TH8412" "TH8413" "TH8414" "TH8415" "TH8416" "TH8417" "TH8418" "TH8419" "TH8501" "TH8502" "TH8503" "TH8504" "TH8505" "TH8601" "TH8602" "TH8603" "TH8604" "TH8605" "TH8606" "TH8607" "TH8608" "TH9001" "TH9002" "TH9003" "TH9004" "TH9005" "TH9006" "TH9007" "TH9008" "TH9009" "TH9010" "TH9011" "TH9012" "TH9013" "TH9014" "TH9015" "TH9016" "TH9101" "TH9102" "TH9103" "TH9104" "TH9105" "TH9106" "TH9107" "TH9201" "TH9202" "TH9203" "TH9204" "TH9205" "TH9206" "TH9207" "TH9208" "TH9209" "TH9210" "TH9301" "TH9302" "TH9303" "TH9304" "TH9305" "TH9306" "TH9307" "TH9308" "TH9309" "TH9310" "TH9311" "TH9401" "TH9402" "TH9403" "TH9404" "TH9405" "TH9406" "TH9407" "TH9408" "TH9409" "TH9410" "TH9411" "TH9412" "TH9501" "TH9502" "TH9503" "TH9504" "TH9505" "TH9506" "TH9507" "TH9508" "TH9601" "TH9602" "TH9603" "TH9604" "TH9605" "TH9606" "TH9607" "TH9608" "TH9609" "TH9610" "TH9611" "TH9612" "TH9613" 
)


# Total number of provinces
total=${#amphoe_code[@]}
current=1

# Loop through each amphoe code in the array
for code in "${amphoe_code[@]}"; do
    output_file="$output_dir/amphoe_${code}.json"
    
    # Execute ogr2ogr command with a where clause filtering by ADM2_PCODE
    ogr2ogr -f "GeoJSON" "$output_file" "$input_file" -where "ADM2_PCODE = '$code'"
    
    # Check if the file was created successfully
    if [[ -f "$output_file" ]]; then
        echo "($current/$total) Successfully created $output_file"
    else
        echo "($current/$total) Failed to create $output_file"
    fi
    
    # Increment the current province counter
    ((current++))
done

